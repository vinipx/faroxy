<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faroxy Documentation</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/documentation.css">
</head>
<body>
    <div class="theme-switch">
        <span>ðŸŒž</span>
        <label class="switch">
            <input type="checkbox" id="theme-toggle" checked>
            <span class="slider"></span>
        </label>
        <span>ðŸŒ™</span>
    </div>

    <div class="layout-container">
        <nav class="nav">
            <div class="logo">
                <img src="https://raw.githubusercontent.com/vinipx/faroxy/main/docs/assets/images/android-chrome-512x512.png" alt="Faroxy Logo">
                <div class="version">v1.2.2</div>
            </div>
            <ul class="nav-links">
                <li><a href="#introduction">Introduction</a></li>
                <li><a href="#features">Features</a></li>
                <li><a href="#getting-started">Getting Started</a></li>
                <li><a href="#configuration">Configuration</a></li>
                <li><a href="#api-reference">API Reference</a></li>
                <li><a href="#web-interface">Web Interface</a></li>
                <li><a href="#troubleshooting">Troubleshooting</a></li>
            </ul>
        </nav>

        <main class="main-content">
            <div class="content">
                <h1 id="introduction">Faroxy Documentation</h1>
                <p>Welcome to the Faroxy documentation. Faroxy is a modern HTTP proxy server with real-time traffic monitoring and analysis capabilities.</p>

                <h2 id="features">Features</h2>
                <ul>
                    <li>Forward HTTP requests and responses (GET, POST, and other methods)</li>
                    <li>Support for form data and custom headers</li>
                    <li>Store intercepted requests and responses in H2 in-memory database</li>
                    <li>Modern and intuitive web interface with real-time traffic monitoring</li>
                    <li>RESTful APIs to retrieve logged requests and responses</li>
                    <li>Cross-platform support (macOS and Windows)</li>
                    <li>Docker support for easy deployment</li>
                </ul>

                <h2 id="getting-started">Getting Started</h2>
                <h3>Installation</h3>
                <p>Clone the repository and run the setup script:</p>
                <pre><code>git clone https://github.com/vinipx/faroxy.git
cd faroxy
./scripts/setup.sh</code></pre>

                <h3>Running Faroxy</h3>
                <p>Start the server using:</p>
                <pre><code>./scripts/faroxy.sh start</code></pre>

                <h2 id="configuration">Configuration</h2>
                <p>Faroxy can be configured using the <code>application.yml</code> file. Here are the main configuration options:</p>
                <pre><code>faroxy:
  proxy:
    enabled: true
    mode: PROXY
    bind-address: 0.0.0.0
    port: 8080
  logging:
    response:
      enabled: true
      body: true
    request:
      enabled: true
      body: true</code></pre>

                <h2 id="api-reference">API Reference</h2>
                <h3>Proxy Endpoints</h3>
                <ul>
                    <li><code>GET /proxy?url=...</code> - Forward GET requests</li>
                    <li><code>POST /proxy?url=...</code> - Forward POST requests</li>
                    <li><code>GET /api/logs</code> - Retrieve request/response logs</li>
                </ul>

                <h2 id="web-interface">Web Interface</h2>
                <p>The web interface is accessible at <code>http://localhost:8080/ui</code> and provides:</p>
                <ul>
                    <li>Real-time traffic monitoring</li>
                    <li>Request/response inspection</li>
                    <li>Search and filtering capabilities</li>
                    <li>Dark mode support</li>
                </ul>

                <h2 id="troubleshooting">Troubleshooting</h2>
                <p>Common issues and their solutions:</p>
                <ul>
                    <li>Port already in use: Change the port in application.yml</li>
                    <li>Connection refused: Check if the target URL is accessible</li>
                    <li>Memory issues: Adjust JVM heap size in faroxy.sh</li>
                </ul>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const toggle = document.getElementById('theme-toggle');
            const html = document.documentElement;
            
            // Set initial state based on class
            toggle.checked = html.classList.contains('dark');

            toggle.addEventListener('change', () => {
                if (toggle.checked) {
                    html.classList.add('dark');
                    localStorage.setItem('theme', 'dark');
                } else {
                    html.classList.remove('dark');
                    localStorage.setItem('theme', 'light');
                }
            });

            // Check for saved theme preference
            const savedTheme = localStorage.getItem('theme') || 'dark';
            if (savedTheme === 'dark') {
                html.classList.add('dark');
                toggle.checked = true;
            } else {
                html.classList.remove('dark');
                toggle.checked = false;
            }
        });
    </script>
</body>
</html>
